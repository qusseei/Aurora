import vapoursynth as vs
import sys
import havsfunc as haf
import mvsfunc as mvf

core = vs.get_core(threads=8)
core.max_cache_size = 2000

core.avs.LoadPlugin(r"C:\Protable\dgdecnv2053\x64 Binaries\DGDecodeNV.dll")

# src = r"D:\Movie\00002.m2ts"
# rip = r"D:\Movie\Lover.Letter.1995.720p.BluRay.AC3.x264-CQ.mkv"
src8 = core.avs.DGSource(r"D:\I Have to Buy New Shoes 2012 BluRay 1080p AVC TrueHD 5.1_T2_Video - .dgi")

# rip = core.lsmas.LWLibavSource(rip,threads = 1,format = "yuv420p16")
# rip = core.lsmas.LSMASHVideoSource(rip,threads = 1,format = "yuv420p16")

src16 = mvf.Depth(src8,depth = 16)
# src16 = core.fmtc.bitdepth(src,bitdepth = 16)
# src16 = mvf.Depth(src8, depth=16, fulls=True, fulld=False)

src16 = core.resize.Spline36(src16,1280,720)
src16 = core.f3kdb.Deband(src16,output_depth = 16)

# rip8 = core.lsmas.LWLibavSource(rip,threads = 1)
# rip16 = mvf.Depth(rip8,depth = 16)
res = src16
# res = core.std.Interleave([src16,rip16])
# res =core.text.ClipInfo(res, 7)
#res = mvf.ToRGB(res,full=False,depth=8)

res.set_output()

